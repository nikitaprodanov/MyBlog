<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../static/css/user_info.css">
    <title>User Info</title>
</head>
<body onload="start()">
    <div class="card">
        <a class="Home" href="/">Home</a>
        <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="John" style="width:100%">
        <h1>{{ user.username }}</h1>
        <p class="title">{{ user.email }}</p>
        <a href="/posts/user_posts">My posts</a> <br/>
        <p>Blogger</p>
        <div>
            <form action="/log_out" method="POST">
                <input type="submit" value="log out">
            </form>
        </div>
    </div>
    <div class="edit">
            {% for message in get_flashed_messages() %}
                <p>{{ message }}</p>
            {% endfor %}
            <button onclick="eUsername()">Edit username</button>
            <button onclick="eEmail()">Edit email</button>
            <button onclick="ePassword()">Edit password</button>
            
            <script>
                function eUsername() {
                    var u = document.getElementById("e-username");
                    if (u.style.display === "none") {
                        u.style.display = "block";
                    } else {
                        u.style.display = "none";
                    }
                }
                function eEmail() {
                    var e = document.getElementById("e-email");
                    if (e.style.display === "none") {
                        e.style.display = "block";
                    } else {
                        e.style.display = "none";
                    }
                }
                function ePassword() {
                    var p = document.getElementById("e-password");
                    if (p.style.display === "none") {
                        p.style.display = "block";
                    } else {
                        p.style.display = "none";
                    }
                }
                function start(){
                    eUsername();
                    eEmail();
                    ePassword();
                }
            </script>    
            
            <div id="e-username">
                <p>Edit your username</p>
                <form action="/edit_user_username" method="post">
                    <input type="text" name="username" value="{{ user.username }}" placeholder="Enter your new username" required>
                    <input type="password" name="oldpassword" placeholder="Enter your password" required>
                    <button type="submit">Save</button>
                </form>
            </div>
            <div id="e-email">
                <p>Edit your email</p>
                <form action="/edit_user_email" method="post">
                    <input type="text" name="email" value="{{ user.email }}" placeholder="Enter your new email" required>
                    <input type="password" name="oldpassword" placeholder="Enter your password" required>
                    <button type="submit">Save</button>
                </form>
            </div>
            <div id="e-password">
                <p>Edit your password</p>
                <form action="/edit_user_password" method="post">
                    <input type="password" name="oldpassword" placeholder="Enter your old password" required>
                    <input type="password" name="password" placeholder="Enter your new password" required>
                    <input type="password" name="confirmpassword" placeholder="Confirm your new password" required>
                    <button type="submit">Save</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>